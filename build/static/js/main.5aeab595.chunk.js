(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t){e.exports={importance:[{value:"_any",presentation:{rus:"\u041b\u044e\u0431\u0430\u044f",eng:"Not defined"}},{value:"low",presentation:{rus:"\u041d\u0438\u0437\u043a\u0430\u044f",eng:"Low"}},{value:"medium",presentation:{rus:"\u0421\u0440\u0435\u0434\u043d\u044f\u044f",eng:"Medium"}},{value:"high",presentation:{rus:"\u0412\u044b\u0441\u043e\u043a\u0430\u044f",eng:"High"}}],status:[{value:"_any",presentation:{rus:"\u041b\u044e\u0431\u043e\u0439",eng:"Not defined"}},{value:"notStarted",presentation:{rus:"\u041d\u0435 \u043d\u0430\u0447\u0430\u043b\u0430\u0441\u044c"}},{value:"wip",presentation:{rus:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435"}},{value:"completed",presentation:{rus:"\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0430"}},{value:"postponed",presentation:{rus:"\u041e\u0442\u043b\u043e\u0436\u0435\u043d\u0430"}}]}},15:function(e,t,a){e.exports={Main:"Main_Main__2I_Pl",Filter:"Main_Filter__2NhL_",TagsContainer:"Main_TagsContainer__bV2vR",Inputs:"Main_Inputs__2HgiG",Button:"Main_Button__2wGWw"}},16:function(e,t,a){e.exports={Tag:"TagsNode_Tag__nEBEA",Buttons:"TagsNode_Buttons__2HYfy",Content:"TagsNode_Content__2kx0s",ButtonExpand:"TagsNode_ButtonExpand__NxO2v",Label:"TagsNode_Label__1BCyG"}},17:function(e,t,a){e.exports={Tag:"TagsEntryLine_Tag__28-uu",TagName:"TagsEntryLine_TagName__2Z7ra",TagPath:"TagsEntryLine_TagPath__hE4PJ"}},18:function(e,t,a){e.exports={SelectionArea:"TagsSelection_SelectionArea__1nxQA",AddTag:"TagsSelection_AddTag__3pr_E",SelectionItems:"TagsSelection_SelectionItems__3R9w_",SelectionItem:"TagsSelection_SelectionItem__1jJCn"}},19:function(e,t,a){e.exports={EntryContainer:"TagsEditor_EntryContainer__3n4v1",TagsContainer:"TagsEditor_TagsContainer__22nuv",InputsContainer:"TagsEditor_InputsContainer__3yheS",ResultSection:"TagsEditor_ResultSection__1uTZT"}},2:function(e,t,a){e.exports={EntryLine:"EntryLine_EntryLine__3KlWM",Contents:"EntryLine_Contents__3k9co",Line:"EntryLine_Line__16ROe",Label:"EntryLine_Label__1FAOV",LineContent:"EntryLine_LineContent__1wxwT",Title:"EntryLine_Title__16Av2",Attributes:"EntryLine_Attributes__22fB2",Buttons:"EntryLine_Buttons__rrWDC",Button:"EntryLine_Button__3sw1D"}},20:function(e,t,a){e.exports={EntryContainer:"EntryManager_EntryContainer__3oPhZ",TagsContainer:"EntryManager_TagsContainer__3qYhH",InputsContainer:"EntryManager_InputsContainer__Sxe_e",ResultSection:"EntryManager_ResultSection__2Mvlw"}},21:function(e,t,a){e.exports={TagsBox:"TagsManager_TagsBox__13Xhi",TagsTree:"TagsManager_TagsTree__3BFNv"}},24:function(e,t,a){e.exports={App:"App_App__3zNbt",AppHeader:"App_AppHeader__iwyFw"}},26:function(e,t){e.exports=function(e){for(var t=new Map,a=0;a<e.length;a++){var n={};if(e[a].hasOwnProperty("parentGi")){var l=e[a].parentGi;for(n.parent=l,n.ancestors=[].concat(l);e[l].hasOwnProperty("parentGi");)n.ancestors.push(e[l].parentGi),l=e[l].parentGi}n.descendantsAll=[],n.descendantsDir=[],n.descendantsAllNodes=[],n.descendantsDirNodes=[];for(var s=a+1;s<e.length&&!(e[s].level<=e[a].level);s++)e[s].level===e[a].level+1&&e[s].hasOwnProperty("expanded")?(n.descendantsDir.push(e[s].gi),n.descendantsDirNodes.push(e[s].gi),n.descendantsAll.push(e[s].gi),n.descendantsAllNodes.push(e[s].gi)):e[s].level===e[a].level+1?(n.descendantsDir.push(e[s].gi),n.descendantsAll.push(e[s].gi)):e[s].level>e[a].level+1&&e[s].hasOwnProperty("expanded")?(n.descendantsAll.push(e[s].gi),n.descendantsAllNodes.push(e[s].gi)):e[s].level>e[a].level+1&&n.descendantsAll.push(e[s].gi);t.set(e[a].gi,n)}for(var i=0;i<e.length;i++)delete e[i].parentGi,delete e[i].childrenGi;return t}},27:function(e,t,a){e.exports={Button:"Button_Button__1YEJY",Success:"Button_Success__3Ke1G",Danger:"Button_Danger__3eCGi"}},42:function(e,t,a){e.exports={Input:"Input_Input__2wRhj"}},43:function(e,t,a){e.exports=a(76)},48:function(e,t,a){},76:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),s=a(38),i=a.n(s),r=a(12),o=(a(48),a(1)),c=a(4),d=a(5),u=a(7),p=a(6),g=a(8),m=a(14),f=a(24),v=a.n(f),h=a(28),y=a(3),E=a(39),b=a.n(E).a.create({baseURL:"https://pfentries.herokuapp.com",headers:{Accept:"application/json"}});b.defaults.headers.post["Content-Type"]="application/json";var C=b,_=a(15),T=a.n(_),S=a(17),N=a.n(S),k=function(e){var t;return t=e.tags.length?function(e){return e.map(function(e){var t=l.a.createElement("span",{className:N.a.TagName},e.name+" ");if(e.ancestors&&e.ancestors.length>0){var a=e.ancestors.map(function(e){return e.name});return l.a.createElement("span",{key:e._id,className:N.a.Tag},t,l.a.createElement("span",{className:N.a.TagPath},"("+a.join("/")+"/"+e.name+")"))}return l.a.createElement("span",{key:e._id,className:N.a.Tag},t)})}(e.tags):"\u0411\u0435\u0437 \u0442\u044d\u0433\u0430 (\u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438)",l.a.createElement(l.a.Fragment,null,t)},x=a(2),w=a.n(x),j=function(e){return l.a.createElement("div",{className:w.a.EntryLine},l.a.createElement("div",{className:w.a.Contents},l.a.createElement("div",{className:"".concat(w.a.Line," ").concat(w.a.Title)},l.a.createElement("span",{className:w.a.Label},"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"),l.a.createElement("span",{className:w.a.LineContent},e.title)),l.a.createElement("div",{className:"".concat(w.a.Line," ").concat(w.a.Tags)},l.a.createElement("span",{className:w.a.Label},"\u0422\u044d\u0433\u0438"),l.a.createElement("span",{className:w.a.LineContent},l.a.createElement(k,{tags:e.tags}))),l.a.createElement("div",{className:"".concat(w.a.Line," ").concat(w.a.Description)},l.a.createElement("span",{className:w.a.Label},"\u0421\u043e\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u0435"),l.a.createElement("span",{className:w.a.LineContent},e.description))),l.a.createElement("div",{className:w.a.Attributes},l.a.createElement("p",null,e.datePresent),l.a.createElement("p",null,e.importancePresent),l.a.createElement("p",null,e.statusPresent),l.a.createElement("div",{className:w.a.Buttons},l.a.createElement(r.b,{to:{pathname:"/editEntry",state:{entryData:{title:e.title,description:e.description,date:e.date,importance:e.importance,status:e.status,tags:Object(y.a)(e.tags),id:e.id}}}},l.a.createElement("button",{className:w.a.Button},"\u0418\u0441\u043f\u0440\u0430\u0432\u0438\u0442\u044c")),l.a.createElement("button",{className:w.a.Button,onClick:function(t){if(window.confirm("\u0423\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u044d\u0442\u0443 \u0437\u0430\u043f\u0438\u0441\u044c?"))return e.deleteClick(t,e.id)}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"))))},O=a(13),I=a.n(O),A=a(16),M=a.n(A),H=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).checkboxRef=l.a.createRef(),a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.checkboxRef.current&&(this.checkboxRef.current.indeterminate=this.props.indeterminate)}},{key:"componentDidUpdate",value:function(){this.checkboxRef.current&&(this.checkboxRef.current.indeterminate=this.props.indeterminate)}},{key:"render",value:function(){var e,t;this.props.hasOwnProperty("expanded")?(t=this.props.expanded?"\u25bc":"\u25b6",e=l.a.createElement("button",{className:M.a.ButtonExpand,onClick:this.props.nodeExpandClick},t)):(e=null,t=null);var a={paddingLeft:(1.5*this.props.level).toString()+"rem"},n=this.props.selected,s=l.a.createElement("input",{type:"checkbox",onChange:this.props.clickSelect,checked:n,ref:this.checkboxRef}),i=null,r=null,o=null;return"tagsEditor"===this.props.mode&&(s=null,i=l.a.createElement("button",{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0442\u044d\u0433 ".concat(this.props.name),onClick:this.props.tagEditClick},"\u270d"),r=l.a.createElement("button",{title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u044b\u0439 \u0434\u043e\u0447\u0435\u0440\u043d\u0438\u0439 \u0442\u044d\u0433 \u043a \u0442\u044d\u0433\u0443 ".concat(this.props.name),onClick:this.props.tagAddChildClick},"\u23ce"),o=l.a.createElement("button",{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0442\u044d\u0433 ".concat(this.props.name),onClick:this.props.tagDeleteClick},"\ud83d\uddd1")),l.a.createElement("li",{className:M.a.Tag,title:this.props.description},l.a.createElement("span",{className:M.a.Buttons},i,o,r),l.a.createElement("span",{className:M.a.Content,style:a},e,l.a.createElement("label",null,s,l.a.createElement("span",{className:M.a.Label},this.props.name))))}}]),t}(n.Component),D=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.props.tags.map(function(t,a){if(t.visible)return l.a.createElement(H,Object.assign({key:t.gi},t,{nodeExpandClick:function(a){return e.props.nodeExpandClickHandler(a,t.gi,t.expanded)},clickSelect:function(a){return e.props.selectedHandler(a,t.gi)},tagEditClick:function(a){return e.props.tagEditClick(a,t.gi)},tagDeleteClick:function(a){if(window.confirm("\u0415\u0441\u043b\u0438 \u043a \u044d\u0442\u043e\u043c\u0443 \u0442\u044d\u0433\u0443 \u043f\u0440\u0438\u0432\u044f\u0437\u0430\u043d\u044b \u0437\u0430\u043f\u0438\u0441\u0438, \u0442\u044d\u0433 \u043d\u0435 \u0431\u0443\u0434\u0435\u0442 \u0443\u0434\u0430\u043b\u0435\u043d. \u041f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u0431\u0443\u0434\u0443\u0442 \u0443\u0434\u0430\u043b\u0435\u043d\u044b \u0442\u0430\u043a\u0436\u0435 \u0432\u0441\u0435 \u0434\u043e\u0447\u0435\u0440\u043d\u0438\u0435 \u0442\u044d\u0433\u0438. \u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0430\u0435\u043c?"))return e.props.tagDeleteClick(a,t.gi)},tagAddChildClick:function(a){return e.props.tagAddChildClick(a,t.gi)},mode:e.props.mode}))});return l.a.createElement("div",null,t)}}]),t}(n.Component),P=a(18),F=a.n(P),L=function(e){var t,a,n=e.tagsSelected,s=e.treeExpanded,i=e.treeExpansionClick;t=s?"\u25bc":"\u25b2",a=0!==n.length&&e.showSelectionBox?l.a.createElement("ul",{className:F.a.SelectionItems},n.map(function(t){return l.a.createElement("li",{className:F.a.SelectionItem,gi:t.gi,key:t._id,title:t.description},l.a.createElement("span",null,t.name),l.a.createElement("label",{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0439 \u0442\u044d\u0433"},"\u2a2f",l.a.createElement("input",{type:"checkbox",onChange:function(a){return e.selectedHandler(a,t.gi)},checked:!0})))})):l.a.createElement("span",null,"\u0412\u044b\u0431\u0435\u0440\u0435\u0442\u0435 \u0442\u044d\u0433\u0438...");var r=null;return"tagsEditor"===e.mode&&(r=l.a.createElement("button",{className:F.a.AddTag,title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u044b\u0439 \u0442\u044d\u0433 1-\u0433\u043e \u0443\u0440\u043e\u0432\u043d\u044f",onClick:e.tagAddClick},"\u041d\u043e\u0432\u044b\u0439 \u0442\u044d\u0433")),l.a.createElement("div",{className:F.a.SelectionArea},a,l.a.createElement("button",{onClick:i},t),r)},B=function(e){var t=[];e.sort(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";return function(a,n){if(!a.hasOwnProperty(e)||!n.hasOwnProperty(e))return 0;var l="string"===typeof a[e]?a[e].toUpperCase():a[e],s="string"===typeof n[e]?n[e].toUpperCase():n[e],i=0;return l>s?i=1:l<s&&(i=-1),"desc"===t?-1*i:i}}("name"));var a=e.filter(function(e){return 1===e.level});if(function e(a,n){var l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;n.forEach(function(n){var s=a.filter(function(e){return+e.level===+l+1&&n._id===e.parent});0===s.length?t.push(n):(t.push(n),e(a,s,l+1))})}(e.filter(function(e){return 1!==e.level}),a),t.length===e.length)return t;throw new Error("Initial tags sorting did not go well! Check algorithm or data integrity!")},U=function(e,t,a){e.forEach(function(e,t){e.gi=t});var n=[],l=new Map,s=!0,i=!1,r=void 0;try{for(var o,c=e[Symbol.iterator]();!(s=(o=c.next()).done);s=!0){var d=o.value;if(l.set(d._id,d),t.length>0){var u=!0,p=!1,g=void 0;try{for(var m,f=t[Symbol.iterator]();!(u=(m=f.next()).done);u=!0){var v=m.value;d._id===v&&n.push(d.gi)}}catch(y){p=!0,g=y}finally{try{u||null==f.return||f.return()}finally{if(p)throw g}}}}}catch(y){i=!0,r=y}finally{try{s||null==c.return||c.return()}finally{if(i)throw r}}for(var h=0;h<e.length;h++)null!==e[h].parent&&(e[h].parentGi=l.get(e[h].parent).gi,e[e[h].parentGi].childrenGi?e[e[h].parentGi].childrenGi.push(e[h].gi):(e[e[h].parentGi].childrenGi=[e[h].gi],e[e[h].parentGi].expanded=!1,e[e[h].parentGi].typeNode=!0)),1===e[h].level?e[h].visible=!0:e[h].visible=!1,e[h].selected=!1,e[h].indeterminate=!1;return n},V=a(26),G=a.n(V),R=function(e){for(var t=[],a=1e3,n=0;n<e.length;n++)if(e[n].selected&&e[n].level<=a)t.push(e[n]),a=e[n].level;else{if(e[n].selected&&e[n].level>a)continue;!e[n].selected&&e[n].level<=a&&(a=1e3)}return t},q=function(e,t,a){var n=t[e],l=[],s=[e];!0===n.typeNode&&s.push.apply(s,Object(y.a)(a.get(e).descendantsAll)),n.parent&&l.push.apply(l,Object(y.a)(a.get(e).ancestors));for(var i=0,r=s;i<r.length;i++)t[r[i]].selected=!0;for(var o=0,c=l;o<c.length;o++)t[c[o]].indeterminate=!0},W=a(21),J=a.n(W),Y=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).selectedHandler=function(e,t){var n=a.state.tags[t],l=[t],s=[],i=e.target.checked,r=[],o=[],c=[],d=[];if(!0===n.typeNode&&(s.push.apply(s,Object(y.a)(a.state.tagsMap.get(t).descendantsAll)),o.push.apply(o,[t].concat(Object(y.a)(a.state.tagsMap.get(t).descendantsAllNodes)))),n.parent){var u,p=0,g=0,m=0;u=e.target.checked?1:0;for(var f=t,v=a.state.tags[a.state.tagsMap.get(t).parent];v;){var h=a.state.tagsMap.get(v.gi).descendantsDir.length;if(h>1){var E=void 0,b=void 0,C=!0,_=!1,T=void 0;try{for(var S,N=a.state.tagsMap.get(v.gi).descendantsDir[Symbol.iterator]();!(C=(S=N.next()).done);C=!0){var k=S.value,x=a.state.tags[k];k!==f?(E=Number(x.selected),b=Number(x.indeterminate)):(E=u,b=p),g+=E,m+=b}}catch(w){_=!0,T=w}finally{try{C||null==N.return||N.return()}finally{if(_)throw T}}}else g=u,m=p;if(console.log("".concat(v.name,": chGi - ").concat(f,", chS - ").concat(u,", chI - ").concat(p," maxDD - ").concat(h,", DDS - ").concat(g,", DDI - ").concat(m)),g===h?(u=1,p=0,c.push(v.gi),o.push(v.gi)):0===g&&0===m?(u=0,p=0,d.push(v.gi),o.push(v.gi)):(g>0&&g<h||m>0)&&(u=0,p=1,d.push(v.gi),r.push(v.gi)),!v.parent)break;f=v.gi,v=a.state.tags[a.state.tagsMap.get(v.gi).parent],g=0,m=0}}a.stateUpdate([{key:"selected",type:"toggle",value:null,gis:l},{key:"selected",type:"new",value:i,gis:s},{key:"selected",type:"new",value:!0,gis:c},{key:"selected",type:"new",value:!1,gis:d},{key:"indeterminate",type:"new",value:!1,gis:o},{key:"indeterminate",type:"new",value:!0,gis:r}])},a.treeExpansionHandler=function(){a.setState({treeExpanded:!a.state.treeExpanded})},a.nodeExpandClickHandler=function(e,t,n){if(n){var l=[t];l.push.apply(l,Object(y.a)(a.state.tagsMap.get(t).descendantsAllNodes));var s=[];s.push.apply(s,Object(y.a)(a.state.tagsMap.get(t).descendantsAll)),a.stateUpdate([{key:"expanded",type:"new",value:!1,gis:l},{key:"visible",type:"new",value:!1,gis:s}])}else a.stateUpdate([{key:"expanded",type:"new",value:!0,gis:[t]},{key:"visible",type:"new",value:!0,gis:a.state.tagsMap.get(t).descendantsDir}])},a.selectedIdsHandler=function(e){var t=new Set,n=[],l=!0,s=!1,i=void 0;try{for(var r,o=e[Symbol.iterator]();!(l=(r=o.next()).done);l=!0){var c=r.value;if(a.state.tagsMap.get(c.gi).ancestors)for(var d=a.state.tagsMap.get(c.gi).ancestors,u=d.length-1;u>=0;u--)t.add(a.state.tags[d[u]]._id);t.add(c._id),n.push(c._id)}}catch(p){s=!0,i=p}finally{try{l||null==o.return||o.return()}finally{if(s)throw i}}a.props.selectedTagsIdsHandler(Array.from(t),n)},a.tagEditClick=function(e,t){var n={};n.name=a.state.tags[t].name,n.description=a.state.tags[t].description,n.level=a.state.tags[t].level,n._id=a.state.tags[t]._id,n.ancestorsIds=a.state.tags[t].ancestors;var l=a.state.tagsMap.get(t).ancestors;if(l){for(var s=[],i=l.length-1;i>=0;i--)s.push(a.state.tags[l[i]].name);n.ancestorsNames=s.join("/");var r=l[0],o=a.state.tagsMap.get(r).descendantsDir,c=[],d=!0,u=!1,p=void 0;try{for(var g,m=o[Symbol.iterator]();!(d=(g=m.next()).done);d=!0){var f=g.value;c.push(a.state.tags[f].name.toUpperCase())}}catch(v){u=!0,p=v}finally{try{d||null==m.return||m.return()}finally{if(u)throw p}}n.siblingsNames=c.filter(function(e){return e!==n.name.toUpperCase()})}a.props.tagEditClick(n)},a.tagAddChildClick=function(e,t){var n,l={};l.level=+a.state.tags[t].level+1,l.ancestorsIds=[],a.state.tags[t].ancestors&&(n=l.ancestorsIds).push.apply(n,Object(y.a)(a.state.tags[t].ancestors)),l.ancestorsIds.push(a.state.tags[t]._id),l.parentId=a.state.tags[t]._id;var s=a.state.tagsMap.get(t).ancestors,i=[];if(s)for(var r=s.length-1;r>=0;r--)i.push(a.state.tags[s[r]].name);i.push(a.state.tags[t].name),l.ancestorsNames=i.join("/");var o=a.state.tagsMap.get(t).descendantsDir;if(o.length>0){l.siblingsNames=[];var c=!0,d=!1,u=void 0;try{for(var p,g=o[Symbol.iterator]();!(c=(p=g.next()).done);c=!0){var m=p.value;l.siblingsNames.push(a.state.tags[m].name.toUpperCase())}}catch(f){d=!0,u=f}finally{try{c||null==g.return||g.return()}finally{if(d)throw u}}}a.props.tagAddChildClick(l)},a.tagAddClick=function(){var e={level:1,parentId:null,ancestorsIds:null,ancestorsNames:null},t=[],n=!0,l=!1,s=void 0;try{for(var i,r=a.state.tags[Symbol.iterator]();!(n=(i=r.next()).done);n=!0){var o=i.value;1===o.level&&t.push(o.gi)}}catch(p){l=!0,s=p}finally{try{n||null==r.return||r.return()}finally{if(l)throw s}}if(t.length>0){e.siblingsNames=[];for(var c=0,d=t;c<d.length;c++){var u=d[c];e.siblingsNames.push(a.state.tags[u].name.toUpperCase())}}a.props.tagAddChildClick(e)},a.tagDeleteClick=function(e,t){var n=[];n.push(a.state.tags[t]._id),a.state.tagsMap.get(t).descendantsAll.length>0&&a.state.tagsMap.get(t).descendantsAll.forEach(function(e){n.push(a.state.tags[e]._id)}),a.props.tagDeleteClick(n)},a.state={tags:[],treeExpanded:!0,tagsShouldBeUpdated:!1},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;C.get("/api/tagsAll").then(function(t){var a=B(t.data),n=[];"_all"===e.props.initSelTagsIds[0]?a.forEach(function(e){1===e.level&&n.push(e._id)}):n=e.props.initSelTagsIds;var l=U(a,n,e.props.mode),s=G()(a),i=!0,r=!1,o=void 0;try{for(var c,d=l[Symbol.iterator]();!(i=(c=d.next()).done);i=!0){var u=c.value;q(u,a,s)}}catch(p){r=!0,o=p}finally{try{i||null==d.return||d.return()}finally{if(r)throw o}}e.setState({tags:a,tagsMap:s})}).catch(function(e){console.log("TAGSMANAGER: Error loading tags")})}},{key:"componentDidUpdate",value:function(){var e=this;this.props.tagsUpdated&&(this.setState({tagsShouldBeUpdated:!0}),this.props.tagsUpdatedNotifier()),this.state.tagsShouldBeUpdated&&C.get("/api/tagsAll").then(function(t){var a=B(t.data),n=[];"_all"===e.props.initSelTagsIds[0]?a.forEach(function(e){1===e.level&&n.push(e._id)}):n=e.props.initSelTagsIds;var l=U(a,n),s=G()(a),i=!0,r=!1,o=void 0;try{for(var c,d=l[Symbol.iterator]();!(i=(c=d.next()).done);i=!0){var u=c.value;q(u,a,s)}}catch(p){r=!0,o=p}finally{try{i||null==d.return||d.return()}finally{if(r)throw o}}e.setState({tags:a,tagsMap:s,tagsShouldBeUpdated:!1})}).catch(function(e){console.log("TAGSMANAGER: Error loading tags")});var t=R(this.state.tags);this.selectedIdsHandler(t)}},{key:"stateUpdate",value:function(e){this.setState(function(t){var a=Object(y.a)(t.tags),n=new Map,l=!0,s=!1,i=void 0;try{for(var r,c=e[Symbol.iterator]();!(l=(r=c.next()).done);l=!0){var d=r.value.gis,u=!0,p=!1,g=void 0;try{for(var m,f=d[Symbol.iterator]();!(u=(m=f.next()).done);u=!0){var v=m.value,h=Object(o.a)({},t.tags[v]);n.set(v,h)}}catch(D){p=!0,g=D}finally{try{u||null==f.return||f.return()}finally{if(p)throw g}}}}catch(D){s=!0,i=D}finally{try{l||null==c.return||c.return()}finally{if(s)throw i}}var E=!0,b=!1,C=void 0;try{for(var _,T=e[Symbol.iterator]();!(E=(_=T.next()).done);E=!0){var S=_.value,N=S.key,k=S.type,x=S.value,w=S.gis,j=!0,O=!1,I=void 0;try{for(var A,M=w[Symbol.iterator]();!(j=(A=M.next()).done);j=!0){var H=A.value;switch(k){case"increment":n.get(H)[N]=t.tags[H][N]+x;break;case"function":n.get(H)[N]=x(H);break;case"toggle":n.get(H)[N]=!t.tags[H][N];break;default:n.get(H)[N]=x}a[H]=n.get(H)}}catch(D){O=!0,I=D}finally{try{j||null==M.return||M.return()}finally{if(O)throw I}}}}catch(D){b=!0,C=D}finally{try{E||null==T.return||T.return()}finally{if(b)throw C}}return{tags:a}})}},{key:"render",value:function(){var e;e=this.state.treeExpanded?l.a.createElement(D,{tags:this.state.tags,selectedHandler:this.selectedHandler,nodeExpandClickHandler:this.nodeExpandClickHandler,mode:this.props.mode,tagEditClick:this.tagEditClick,tagAddChildClick:this.tagAddChildClick,tagDeleteClick:this.tagDeleteClick}):null;var t=R(this.state.tags);return l.a.createElement("div",{className:J.a.TagsBox},l.a.createElement("div",{className:J.a.TagsSelection},l.a.createElement(L,{tagsSelected:t,treeExpansionClick:this.treeExpansionHandler,treeExpanded:this.state.treeExpanded,selectedHandler:this.selectedHandler,showSelectionBox:this.props.showSelectionBox,tagAddClick:this.tagAddClick,mode:this.props.mode})),l.a.createElement("div",{className:J.a.TagsTree},e))}}]),t}(n.Component),Z=a(42),K=a.n(Z),z=function(e){var t=null,a=["Input"];switch(e.invalid&&e.shouldValidate&&e.touched&&a.push("Invalid"),e.elementType){case"input":t=l.a.createElement("label",null,l.a.createElement("span",null,e.label),l.a.createElement("input",Object.assign({type:e.elementConfig.type,className:a.join(" ")},e.elementConfig,{value:e.value,onChange:e.changed})));break;case"textarea":t=l.a.createElement("label",null,l.a.createElement("span",null,e.label),l.a.createElement("textarea",Object.assign({className:a.join(" ")},e.elementConfig,{value:e.value,onChange:e.changed})));break;case"select":var n=e.elementConfig.options.map(function(t){return"_any"!==t.value||e.showAny?l.a.createElement("option",{key:t.value,value:t.value},t.presentation.rus):null});t=l.a.createElement("label",null,l.a.createElement("span",null,e.label),l.a.createElement("select",{defaultValue:e.defaultValue,onChange:e.changed},n));break;default:t=l.a.createElement("label",null,l.a.createElement("input",Object.assign({className:a.join(" ")},e.elementConfig,{value:e.value})))}return l.a.createElement("div",{className:K.a.Input},t)},Q=a(27),X=a.n(Q),$=function(e){return l.a.createElement("button",{className:[X.a.Button,X.a[e.btnType]].join(" "),onClick:e.clicked,disabled:e.disabled},e.children)},ee=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(l)))).state={filterConfig:{selectedTagsSearch:a.props.filterConfig.selectedTagsSearch,selectedTagsEP:a.props.filterConfig.selectedTagsEP,importance:a.props.filterConfig.importance,status:a.props.filterConfig.status,date1:a.props.filterConfig.date1,date2:a.props.filterConfig.date2},selectedTagsSearch:a.props.filterConfig.selectedTagsSearch,selectedTagsEP:a.props.filterConfig.selectedTagsEP,editForm:{date1:{elementType:"input",elementConfig:{type:"date"},value:a.props.filterConfig.date1,label:"\u041e\u0442 \u0434\u0430\u0442\u044b (\u0432\u043a\u043b\u044e\u0447\u0438\u0442\u0435\u043b\u044c\u043d\u043e)"},date2:{elementType:"input",elementConfig:{type:"date"},value:a.props.filterConfig.date2,label:"\u0414\u043e \u0434\u0430\u0442\u044b (\u0432\u043a\u043b\u044e\u0447\u0438\u0442\u0435\u043b\u044c\u043d\u043e)"},importance:{elementType:"select",elementConfig:{options:I.a.importance},label:"\u0412\u0430\u0436\u043d\u043e\u0441\u0442\u044c",value:a.props.filterConfig.importance,defaultValue:a.props.filterConfig.importance},status:{elementType:"select",elementConfig:{options:I.a.status},label:"\u0421\u0442\u0430\u0442\u0443\u0441",value:a.props.filterConfig.status,defaultValue:a.props.filterConfig.status}},filterRelevant:!0,entries:[],entriesVisMap:new Map},a.selectedTagsHandler=function(e,t){a.setState(function(a){var n;if("_all"===a.selectedTagsEP[0]||"_all"===a.selectedTagsSearch[0]){n=!0;var l=Object(o.a)({},a.filterConfig);return l.selectedTagsEP=t,l.selectedTagsSearch=e,{filterConfig:l,selectedTagsEP:t,selectedTagsSearch:e,filterRelevant:n}}var s=t.join(),i=e.join(),r=a.selectedTagsEP.join(),c=a.selectedTagsSearch.join();return s!==r&&i!==c?(n="_all"===a.selectedTagsEP[0]||"_all"===a.selectedTagsSearch[0]||0===e.length||0===t.length,{selectedTagsEP:t,selectedTagsSearch:e,filterRelevant:n}):null})},a.inputChangedHandler=function(e,t){var n;if("date1"===t){var l=new Date(a.state.editForm.date2.value).getTime(),s=new Date(e.target.value).getTime();n=!(Number.isNaN(l)||Number.isNaN(s)||s<=l)}else if("date2"===t){var i=new Date(a.state.editForm.date1.value).getTime(),r=new Date(e.target.value).getTime();n=!(Number.isNaN(i)||Number.isNaN(r)||i<=r)}else n=!1;var c=Object(o.a)({},a.state.editForm),d=Object(o.a)({},c[t]);d.value=e.target.value,c[t]=d,a.setState({editForm:c,filterRelevant:n})},a.entryDeleteHandler=function(e,t){C.delete("/api/deleteEntry/"+t).then(function(e){return C.get("/api/entriesAll")}).then(function(e){var t=e.data;a.setState({entries:t})}).catch(function(e){console.log(e.response)})},a.entriesFiltering=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.state.entries,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.state.filterConfig,n=new Map;e.forEach(function(e,a){var l=!1,s=!0,i=!0,r=!0,o=!0,c=!0,d=!1,u=void 0;try{for(var p,g=t.selectedTagsEP[Symbol.iterator]();!(c=(p=g.next()).done);c=!0){var m=p.value;if(e.selectedTagsSearch.includes(m)){l=!0;break}}}catch(y){d=!0,u=y}finally{try{c||null==g.return||g.return()}finally{if(d)throw u}}var f=new Date(e.date).getTime(),v=new Date(t.date1).getTime(),h=new Date(t.date2).getTime();Number.isNaN(v)||(s=f>=v),Number.isNaN(h)||(i=f<=h),"_any"!==t.importance&&(r=e.importance===t.importance),"_any"!==t.status&&(o=e.status===t.status),n.set(e._id,l&&s&&i&&r&&o)}),a.setState({entriesVisMap:n})},a.entriesFilterHandler=function(){var e=Object(o.a)({},a.state.filterConfig);e.date1=a.state.editForm.date1.value,e.date2=a.state.editForm.date2.value,e.importance=a.state.editForm.importance.value,e.status=a.state.editForm.status.value,e.selectedTagsEP=Object(y.a)(a.state.selectedTagsEP),e.selectedTagsSearch=Object(y.a)(a.state.selectedTagsSearch),a.entriesFiltering(void 0,e),a.setState({filterConfig:e,filterRelevant:!0})},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;C.get("/api/entriesAll").then(function(t){var a=t.data;e.entriesFiltering(a),e.setState({entries:a})}).catch(function(e){console.log("MAIN: Error loading entries")})}},{key:"componentWillUnmount",value:function(){this.props.configStateHandler(this.state.filterConfig)}},{key:"render",value:function(){var e=this,t=this.props.filterConfig.selectedTagsEP,a=[];for(var n in this.state.editForm)a.push({id:n,config:this.state.editForm[n]});var s,i=a.map(function(t){return l.a.createElement(z,{key:t.id,elementType:t.config.elementType,elementConfig:t.config.elementConfig,label:t.config.label,value:t.config.value,defaultValue:t.config.defaultValue,changed:function(a){return e.inputChangedHandler(a,t.id)},showAny:!0})}),r=0;return s=this.state.entries.map(function(t,a){if(!e.state.entriesVisMap.get(t._id))return null;r++;var n=new Date(t.date),s=n.getDate().toString().padStart(2,"0")+"."+(n.getMonth()+1).toString().padStart(2,"0")+"."+n.getFullYear(),i=I.a.importance.filter(function(e){return e.value===t.importance}),o=Object(h.a)(i,1)[0].presentation,c=I.a.status.filter(function(e){return e.value===t.status}),d=Object(h.a)(c,1)[0].presentation;return l.a.createElement(j,{key:t._id,title:t.title,description:t.description,datePresent:s,date:t.date,importancePresent:o.rus,importance:t.importance,statusPresent:d.rus,status:t.status,tags:t.selectedTagsEP,id:t._id,deleteClick:e.entryDeleteHandler})}),this.state.entries.length&&0!==r||(s="\u041d\u0435\u0442 \u0437\u0430\u043f\u0438\u0441\u0435\u0439, \u0443\u0434\u043e\u0432\u043b\u0435\u0442\u0432\u043e\u0440\u044f\u044e\u0449\u0438\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u043c!"),l.a.createElement("div",{className:T.a.Main},l.a.createElement("div",{className:T.a.Filter},l.a.createElement("div",{className:T.a.TagsContainer},l.a.createElement(Y,{selectedTagsIdsHandler:this.selectedTagsHandler,initSelTagsIds:t,showSelectionBox:!1,mode:"filter"})),l.a.createElement("div",{className:T.a.Inputs},i),l.a.createElement("div",{className:T.a.Button},l.a.createElement($,{disabled:this.state.filterRelevant,btnType:"Success",clicked:this.entriesFilterHandler},"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440"))),l.a.createElement("div",{className:T.a.EntryLines},s))}}]),t}(n.Component),te=a(19),ae=a.n(te),ne=function(e,t){var a=!0;return t.required&&(a=""!==e.trim()&&a),t.notEqualList&&(a=!t.notEqualList.includes(e.toUpperCase())&&a),t.number&&(a=!Number.isNaN(e)&&a),t.minLength&&(a=e.length>=t.minLength&&a),t.min&&(a=e>=t.min&&a),t.max&&(a=e<=t.max&&a),a},le=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(l)))).state={initSelTagsIds:[],currentTagId:"",ancestorsIds:[],parentId:"",editForm:{fullPath:{elementType:"input",display:!0,elementConfig:{type:"text",placeholder:null,readOnly:!0},value:"",label:"\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0435 \u0442\u044d\u0433\u0438",validation:null,valid:!0,touched:!1},level:{elementType:"input",display:!0,elementConfig:{type:"text",placeholder:null,readOnly:!0},value:"",label:"\u0423\u0440\u043e\u0432\u0435\u043d\u044c \u0438\u0435\u0440\u0430\u0440\u0445\u0438\u0438 \u0442\u044d\u0433\u0430",validation:null,valid:!0,touched:!1},name:{elementType:"input",display:!0,elementConfig:{type:"text",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0442\u044d\u0433\u0430 ...",readOnly:!1},value:"",label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0442\u044d\u0433\u0430",validation:{required:!0,notEqualList:null},valid:!1,touched:!1},description:{elementType:"textarea",display:!0,elementConfig:{placeholder:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0442\u044d\u0433\u0430, \u043f\u043e\u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043f\u0440\u0438 \u043d\u0430\u0432\u0435\u0434\u0435\u043d\u0438\u0438 \u043a\u0443\u0440\u0441\u043e\u0440\u0430 ..."},value:a.props.description,label:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0442\u044d\u0433\u0430",validation:null,valid:!0,touched:!1}},editMode:{type:null,buttonName:"",path:"/api/updateTag"},formIsValid:!1,result:{visibility:!1,message:"",payload:""},tagsUpdated:!1},a.tagsUpdatedNotifier=function(){a.setState(function(e){return e.tagsUpdated?{tagsUpdated:!1}:null})},a.tagEditHandler=function(e){var t,n=[];for(var l in a.state.editForm)n[l]=Object(o.a)({},a.state.editForm[l]);e.ancestorsNames?(n.fullPath.value=e.ancestorsNames,n.fullPath.display=!0,t=e.ancestorsIds[e.ancestorsIds.length-1]):n.fullPath.display=!1,n.level.value=e.level,n.name.value=e.name,n.name.valid=!0,n.description.value=e.description,n.name.validation.notEqualList=e.siblingsNames;a.setState({currentTagId:e._id,ancestorsIds:e.ancestorsIds,parentId:t,editForm:n,editMode:{type:"edit",buttonName:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",path:"/api/updateTag"},formIsValid:!0})},a.tagAddChildHandler=function(e){var t=[],n=e.parentId;for(var l in a.state.editForm)t[l]=Object(o.a)({},a.state.editForm[l]);e.ancestorsNames?(t.fullPath.value=e.ancestorsNames,t.fullPath.display=!0):(t.fullPath.value=null,t.fullPath.display=!1),t.level.value=e.level,t.name.value="",t.description.value="",t.name.validation.notEqualList=e.siblingsNames,console.log(e.siblingsNames);a.setState({currentTagId:void 0,ancestorsIds:e.ancestorsIds,parentId:n,editForm:t,editMode:{type:"add",buttonName:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",path:"/api/postTag"},formIsValid:!1})},a.tagDeleteHandler=function(e){console.log(e),C.post("/api/deleteTag",{ids:e}).then(function(e){var t=Object(o.a)({},a.state.result);t.visibility=!0,e.data&&(t.payload=e.data.payload,"deleteTagUnsuccess"===e.data.type?t.message="\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0442\u044d\u0433. \u041a \u043d\u0435\u043c\u0443 \u0438\u043b\u0438 \u0435\u0433\u043e \u043f\u043e\u0442\u043e\u043c\u043a\u0430\u043c \u043f\u0440\u0438\u0432\u044f\u0437\u0430\u043d\u044b \u0437\u0430\u043f\u0438\u0441\u0438 \u0432 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u0435":"deleteTagSuccess"===e.data.type?t.message="\u0423\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d(\u044b) \u0442\u044d\u0433(\u0438) \u0432 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u0435":"error"===e.data.type&&(t.message="\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430")),a.setState({tagsUpdated:!0,result:t})}).catch(function(e){var t=Object(o.a)({},a.state.result);t.payload="".concat(e.message),t.visibility=!0,t.message="\u041f\u0440\u0438 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438 \u0432\u043e\u0437\u043d\u0438\u043a\u043b\u0430 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430",a.setState({result:t})})},a.tagPostHandler=function(){C.post(a.state.editMode.path,{_id:a.state.currentTagId,name:a.state.editForm.name.value,description:a.state.editForm.description.value,level:a.state.editForm.level.value,ancestors:a.state.ancestorsIds,parent:a.state.parentId}).then(function(e){var t=Object(o.a)({},a.state.result);t.visibility=!0,e.data&&(t.payload=e.data.payload,"addTagSuccess"===e.data.type?t.message="\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d \u043d\u043e\u0432\u044b\u0439 \u0442\u044d\u0433":"updateTagSuccess"===e.data.type?t.message="\u041e\u0442\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d \u0442\u044d\u0433":"error"===e.data.type&&(t.message="\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430")),a.setState({tagsUpdated:!0,result:t})}).catch(function(e){var t=Object(o.a)({},a.state.result);console.log(e.response),t.payload="\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.message),t.visibility=!0,t.message="\u041f\u0440\u0438 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438 \u0432\u043e\u0437\u043d\u0438\u043a\u043b\u0430 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430",a.setState({result:t})})},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"selectedTagsHandler",value:function(){return null}},{key:"inputChangedHandler",value:function(e,t){var a=Object(o.a)({},this.state.editForm),n=Object(o.a)({},a[t]);n.value=e.target.value,n.validation&&(n.valid=ne(n.value,n.validation)),n.touched=!0,a[t]=n;var l=!0;for(var s in a)l=a[s].valid&&l;this.setState({editForm:a,formIsValid:l})}},{key:"render",value:function(){var e,t,a=this;if(this.state.editMode.type){var n=[];for(var s in this.state.editForm)n.push({id:s,config:this.state.editForm[s]});e=n.map(function(e){return e.config.display?l.a.createElement(z,{key:e.id,elementType:e.config.elementType,elementConfig:e.config.elementConfig,label:e.config.label,value:e.config.value,defaultValue:e.config.defaultValue,invalid:!e.config.valid,touched:e.config.touched,shouldValidate:e.config.validation,changed:function(t){return a.inputChangedHandler(t,e.id)}}):null}),t=l.a.createElement($,{btnType:"Success",disabled:!this.state.formIsValid,clicked:this.tagPostHandler},this.state.editMode.buttonName)}var i=null;return this.state.result.visibility&&(i=l.a.createElement(l.a.Fragment,null,l.a.createElement("span",null,this.state.result.message,": "),l.a.createElement("span",null,this.state.result.payload))),l.a.createElement("div",{className:ae.a.EntryContainer},l.a.createElement("div",{className:ae.a.TagsContainer},l.a.createElement(Y,{selectedTagsIdsHandler:this.selectedTagsHandler,initSelTagsIds:this.state.initSelTagsIds,showSelectionBox:!1,mode:"tagsEditor",tagEditClick:this.tagEditHandler,tagDeleteClick:this.tagDeleteHandler,tagsUpdated:this.state.tagsUpdated,tagsUpdatedNotifier:this.tagsUpdatedNotifier,tagAddChildClick:this.tagAddChildHandler,tagAddClick:this.tagAddHandler})),l.a.createElement("div",{className:ae.a.InputsContainer},e,t,l.a.createElement("div",{className:ae.a.ResultSection},i)))}}]),t}(n.Component),se=a(20),ie=a.n(se),re=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(l)))).state={selectedTagsSearch:[],selectedTagsEP:[],editForm:{title:{elementType:"input",display:!0,elementConfig:{type:"text",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0437\u0430\u043f\u0438\u0441\u0438 ..."},value:a.props.title,label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0437\u0430\u043f\u0438\u0441\u0438",validation:{required:!0},valid:"edit"===a.props.mode,touched:!1},description:{elementType:"textarea",elementConfig:{placeholder:"\u0421\u043e\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u0435 \u0437\u0430\u043f\u0438\u0441\u0438 ..."},value:a.props.description,label:"\u0414\u0435\u0442\u0430\u043b\u044c\u043d\u043e\u0435 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u0435",validation:null,valid:!0,touched:!1},date:{elementType:"input",display:!0,elementConfig:{type:"date"},value:new Date(a.props.date).toISOString().substr(0,10),label:"\u0414\u0430\u0442\u0430",validation:{required:!0},valid:!0,touched:!1},importance:{elementType:"select",elementConfig:{options:I.a.importance},label:"\u0412\u0430\u0436\u043d\u043e\u0441\u0442\u044c",validation:null,defaultValue:a.props.importance,value:a.props.importance,valid:!0},status:{elementType:"select",elementConfig:{options:I.a.status},label:"\u0421\u0442\u0430\u0442\u0443\u0441",validation:null,defaultValue:a.props.status,value:a.props.status,valid:!0}},formIsValid:a.props.formIsValid,result:{visibility:!1,message:"",payload:""}},a.selectedTagsHandler=function(e,t){a.setState(function(a){var n=t.join(),l=e.join(),s=a.selectedTagsEP.join(),i=a.selectedTagsSearch.join();return n!==s&&l!==i?{selectedTagsSearch:e,selectedTagsEP:t}:void 0})},a.inputChangedHandler=function(e,t){var n=Object(o.a)({},a.state.editForm),l=Object(o.a)({},n[t]);l.value=e.target.value,l.validation&&(l.valid=ne(l.value,l.validation)),l.touched=!0,n[t]=l;var s=!0;for(var i in n)s=n[i].valid&&s;a.setState({editForm:n,formIsValid:s})},a.entryPostHandler=function(){C.post(a.props.path,{_id:a.props.id,title:a.state.editForm.title.value,description:a.state.editForm.description.value,date:a.state.editForm.date.value,importance:a.state.editForm.importance.value,status:a.state.editForm.status.value,selectedTagsSearch:a.state.selectedTagsSearch,selectedTagsEP:a.state.selectedTagsEP}).then(function(e){var t=Object(o.a)({},a.state.result);t.visibility=!0,e.data&&(t.payload=e.data.payload,"addSuccess"===e.data.type?t.message="\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430 \u043d\u043e\u0432\u0430\u044f \u0437\u0430\u043f\u0438\u0441\u044c":"editSuccess"===e.data.type?t.message="\u041e\u0442\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0430 \u0437\u0430\u043f\u0438\u0441\u044c":"error"===e.data.type&&(t.message="\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430")),a.setState({result:t})}).catch(function(e){var t=Object(o.a)({},a.state.result);console.log(e.response),t.payload="".concat(e.message),t.visibility=!0,t.message="\u041f\u0440\u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0438 \u0437\u0430\u043f\u0438\u0441\u0438 \u0432\u043e\u0437\u043d\u0438\u043a\u043b\u0430 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430",a.setState({result:t})})},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=[];for(var a in this.state.editForm)t.push({id:a,config:this.state.editForm[a]});var n,s=t.map(function(t){return l.a.createElement(z,{key:t.id,elementType:t.config.elementType,elementConfig:t.config.elementConfig,label:t.config.label,value:t.config.value,defaultValue:t.config.defaultValue,invalid:!t.config.valid,touched:t.config.touched,shouldValidate:t.config.validation,changed:function(a){return e.inputChangedHandler(a,t.id)}})}),i=null;switch(this.state.result.visibility&&(i=l.a.createElement(l.a.Fragment,null,l.a.createElement("span",null,this.state.result.message,": "),l.a.createElement("span",null,this.state.result.payload))),this.props.mode){case"add":n="\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c";break;case"edit":n="\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c";break;default:n="\u0412\u044b\u0431\u0440\u0430\u0442\u044c"}var r=[],o=!0,c=!1,d=void 0;try{for(var u,p=this.props.tags[Symbol.iterator]();!(o=(u=p.next()).done);o=!0){var g=u.value;r.push(g._id)}}catch(m){c=!0,d=m}finally{try{o||null==p.return||p.return()}finally{if(c)throw d}}return l.a.createElement("div",{className:ie.a.EntryContainer},l.a.createElement("div",{className:ie.a.TagsContainer},l.a.createElement(Y,{selectedTagsIdsHandler:this.selectedTagsHandler,initSelTagsIds:r,showSelectionBox:!0,mode:"entryManager"})),l.a.createElement("div",{className:ie.a.InputsContainer},s,l.a.createElement($,{btnType:"Success",disabled:!(Boolean(this.state.selectedTagsEP.length)&&this.state.formIsValid),clicked:this.entryPostHandler},n),l.a.createElement("div",{className:ie.a.ResultSection},i)))}}]),t}(l.a.Component),oe=function(e){return console.log(e),l.a.createElement(re,Object.assign({},e.location.state.entryData,{mode:"edit",path:"/api/updateEntry",formIsValid:!0}))},ce=function(e){return l.a.createElement(re,{title:"",description:"",date:(new Date).toISOString().substr(0,10),importance:"medium",status:"notStarted",tags:[],mode:"add",path:"/api/postEntry",formIsValid:!1})},de=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(l)))).state={filterConfig:{selectedTagsSearch:["_all"],selectedTagsEP:["_all"],importance:"_any",status:"_any",date1:"",date2:""}},a.stateHandler=function(e){a.setState({filterConfig:Object(o.a)({},e)})},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:v.a.App},l.a.createElement("header",{className:v.a.AppHeader},l.a.createElement("nav",null,l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement(r.c,{activeStyle:{textDecoration:"underline"},to:"/",exact:!0},"\u0413\u043b\u0430\u0432\u043d\u0430\u044f")),l.a.createElement("li",null,l.a.createElement(r.c,{activeStyle:{textDecoration:"underline"},to:"/addEntry",exact:!0},"\u041d\u043e\u0432\u0430\u044f \u0437\u0430\u043f\u0438\u0441\u044c")),l.a.createElement("li",null,l.a.createElement(r.c,{activeStyle:{textDecoration:"underline"},to:"/editTag",exact:!0},"\u0420\u0435\u0434\u0430\u043a\u0442\u043e\u0440 \u0442\u044d\u0433\u043e\u0432"))))),l.a.createElement("main",null,l.a.createElement(m.c,null,l.a.createElement(m.a,{path:"/",exact:!0,render:function(t){return l.a.createElement(ee,Object.assign({},t,{filterConfig:e.state.filterConfig,configStateHandler:e.stateHandler}))}}),l.a.createElement(m.a,{path:"/editEntry",component:oe}),l.a.createElement(m.a,{path:"/addEntry",component:ce}),l.a.createElement(m.a,{path:"/editTag",component:le}))))}}]),t}(l.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(l.a.createElement(r.a,null,l.a.createElement(de,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[43,1,2]]]);
//# sourceMappingURL=main.5aeab595.chunk.js.map